{% extends 'layout.html' %}
  {% from "fieldset/macro.njk" import govukFieldset %}
  {% from "summary-list/macro.njk" import govukSummaryList %}
  {% from "warning-text/macro.njk" import govukWarningText %}

{{ govukWarningText({
  text: "You can be fined up to Â£5,000 if you do not register.",
  iconFallbackText: "Warning"
}) }}

{% block content %}
  {{ super() }}
  
  {% from "button/macro.njk" import govukButton %}
  {% from "back-link/macro.njk" import govukBackLink %}

  <div id="contact-page" class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <form autocomplete="off" class="form" method="post" action="/application-review-summary" novalidate>
    
    {{ govukFieldset({
        legend: {
        text: "Check your details before requesting your data",
        classes: "govuk-fieldset__legend--l",
        isPageHeading: true
        }
        }) }}

           <p>After you have submitted your request you will not be able to change it. Make sure the site location is accurate.</p>

        <p>You should receive your data in 20 working days.</p>

        {{ govukSummaryList({
  rows: [
    {
      key: {
        text: "name"
      },
      value: {
        text: PDFinformationDetailsObject.fullName
      },
      actions: {
        items: [
          {
            href: "#",
            text: "Change",
            visuallyHiddenText: "name"
          }
        ]
      }
    },
    {
      key: {
        text: "email address"
      },
      value: {
        text: PDFinformationDetailsObject.recipientemail
      },
      actions: {
        items: [
          {
            href: "#",
            text: "Change",
            visuallyHiddenText: "email address"
          }
        ]
      }
    },
    {
      key: {
        text: "Location"
      },
      value: {
        html: '          <figure class="map-container govuk-!-margin-bottom-6">
           <div class="map--result">
              <div id="map" class="map"></div>
            </div>
          </figure>'
      },
        actions: {
        items: [
          {
            href: "#",
            text: "Change",
            visuallyHiddenText: "name"
          }
        ]
      }
    },
    {
      key: {
        text: "Flood Zone"
      },
      value: {
        text: PDFinformationDetailsObject.zoneNumber
      }
    }
  ]
}) }}

{{ govukWarningText({
  text: "For developments larger than a single property you should draw a shape showing the boundary of your site to get accurate information.",
  iconFallbackText: "Warning"
}) }}



        {{ govukButton({
        text: "Request your flood risk assessment data",
        preventDoubleClick: true
        })
        }}
  <link rel="stylesheet" type="text/css" href="{{assetPath}}/stylesheets/ol.css">
      <div class="map--result">
        <div id="map" class="map"></div>
      </div>
 </form>
    </div>
  </div>
  <script src="{{assetPath}}/javascripts/jquery.min.js"></script>
<script src="{{assetPath}}/javascripts/summary.js"></script>

{% if polygon %}
<script>
  $(function () {
    var page = new FMP.SummaryPage({
      polygon: {{ PDFinformationDetailsObject.polygon }} // This needs to be verified as originally {{polygon}}
        })
      })
</script>
{% else %}
<script>
  $(function () {
    var page = new FMP.SummaryPage({ easting: '{{PDFinformationDetailsObject.coordinates.x}}', northing: '{{PDFinformationDetailsObject.coordinates.y}}' })
  })
</script>
{% endif %}

{% endblock %}